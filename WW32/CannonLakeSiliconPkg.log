commit ed61994b8aeaf9a7f855a165ab83730941cb3706
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 30 12:25:52 2017 -0700

    518666:

Intel/CannonLakeSiliconPkg/Docs/SiPkgApi.chm

commit 85caa0f3efc152ca5905d149d38f4eadd7a2a75c
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 30 12:18:39 2017 -0700

    518663:

Intel/CannonLakeSiliconPkg/Cpu/AcpiTables/CpuSsdt/CpuNvs.asl
Intel/CannonLakeSiliconPkg/Cpu/Include/CpuNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Me/AcpiTables/MeSsdt/MeNvs.asl
Intel/CannonLakeSiliconPkg/Me/Include/Private/MeNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Me/Include/Private/PttNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Me/Ptt/Smm/PttNvs.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchNvs.asl
Intel/CannonLakeSiliconPkg/Pch/Include/Private/PchNvsAreaDef.h
Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SaSsdt/SaNvs.asl
Intel/CannonLakeSiliconPkg/SystemAgent/Include/Private/SaNvsAreaDef.h

commit 1b2010d8060471362f2278bc69cff11e368be64d
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 30 12:02:59 2017 -0700

    518661:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 6e9160e69405eb8f6be716198569e879d195676a
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 30 11:46:22 2017 -0700

    518651:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit f52d295876c242a7d04faa20d7cec7615ecb0b0d
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 30 10:08:17 2017 -0700

    518649:

Intel/CannonLakeSiliconPkg/Cpu/AcpiTables/CpuSsdt/CpuNvs.asl
Intel/CannonLakeSiliconPkg/Cpu/Include/CpuNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Include/Register/RegsUsb.h
Intel/CannonLakeSiliconPkg/Library/Private/PeiDxeUsbInitLib/XhciInit.c
Intel/CannonLakeSiliconPkg/Me/AcpiTables/MeSsdt/MeNvs.asl
Intel/CannonLakeSiliconPkg/Me/Include/Private/MeNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Me/Include/Private/PttNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Me/Ptt/Smm/PttNvs.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchNvs.asl
Intel/CannonLakeSiliconPkg/Pch/Include/Private/PchNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Pch/PchInit/Dxe/PchInit.c
Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SaSsdt/SaNvs.asl
Intel/CannonLakeSiliconPkg/SystemAgent/Include/Private/SaNvsAreaDef.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInitCfl/Library/Private/PeiMemoryInitLib/Source/Api/MrcBdat.c

commit eff7d9dfe1e35295c98429abf24d0b547c803e9d
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sat Jul 29 11:46:17 2017 -0700

    518608:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 681e119fffe72489a8d42d952f17006c02824b67
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 28 11:54:13 2017 -0700

    518393:[1406321238]Set pmcclkdis field of CPMVRIC3 register to zero by default
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchPm.c

commit daf33b779346575e60e6087b8a8e84c7a2fa56b8
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 28 11:48:55 2017 -0700

    518386:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit e2439ccad8a131e72dac82fc80cbdfdbe2eb030b
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 28 09:12:18 2017 -0700

    518298:[1406345964][1406346033]Updating CFL Emmc and SDCard DLL values
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchScs.c

commit aa571bccee43935923d6eeb971c563d3b13006ee
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 28 07:51:30 2017 -0700

    518283:[1604404995] CNL [U7][Y7][GT0]  Intel Pleasent star PCIe NVME storage getting lost while running warm reset and S4 cycling test
    We are suspecting sending incorrect IPC command might cause unexpected behavior. (Clock seems disabled when issue happened.)
    Therefore bring the change CL513966 back and disable SPCO method temporarily to avoid the display issue (1604409732)
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/Pch.asl

commit 4da06bf37da819d7f6a618437e6906cf4c157cb6
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 28 06:51:38 2017 -0700

    518277:Merging //ClientBIOS/2016_Kabylake - [1805322775] Finalize code that sets Bit 11 in SPIBAR+0x04
    [Description]
    Align the WRSDIS setting implementation between server and client BIOS
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/Private/Library/PchSpiCommonLib.h
Intel/CannonLakeSiliconPkg/Pch/Library/Private/BasePchSpiCommonLib/SpiCommon.c
Intel/CannonLakeSiliconPkg/Pch/PchInit/Dxe/PchInit.c

commit ca8918130f4d22d61c167a1f78700ff0d09136e4
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 28 04:52:01 2017 -0700

    518259:Fix build failure by 518247
    ---
    

Intel/CannonLakeSiliconPkg/Library/Private/PeiCpuAndPchTraceHubLib/PeiCpuAndPchTraceHubLib.c

commit 0c3474130fac5b4a38887d4ce646798ff951487e
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 28 03:55:22 2017 -0700

    518247:[1604355828] Memory reserved for Trace Hub is double the required size for FSP boot.
    ---
    
    Core allocate aligned-memory service will allocate double of required size for base alignment, the memory overhead will be recycled back to memory map. However memory used by FSP would be marked as reserved, that can never take it back. Move memory allocation from Si (FSP) to platform (boot loader), and pass allocated base via policy for silicon to do following initialization.
    1. Move memory allocation from silicon to platform, add a policy/UPD that carries allocated memory base.
    2. Make trace memory to BWG default : PCH (64MB/64MB) / CPU (128MB/128MB) to handle memory allocation for SCRPD0[24] set even when TraceHubMode is disabled.
    3. Add trace hub memory check, if total (CPU+PCH) TH memory size over 512MB, enforce them to BWG default. ( PCH (64MB/64MB) / CPU (128MB/128MB))

Intel/CannonLakeSiliconPkg/Include/ConfigBlock/SiConfig.h
Intel/CannonLakeSiliconPkg/Include/Library/SiPolicyLib.h
Intel/CannonLakeSiliconPkg/Include/Private/Library/PeiCpuAndPchTraceHubLib.h
Intel/CannonLakeSiliconPkg/Library/PeiSiPolicyLib/PeiSiPolicyLib.inf
Intel/CannonLakeSiliconPkg/Library/PeiSiPolicyLib/PeiSiPolicyLibPreMem.c
Intel/CannonLakeSiliconPkg/Library/PeiSiPolicyLib/SiPrintPolicy.c
Intel/CannonLakeSiliconPkg/Library/Private/PeiCpuAndPchTraceHubLib/PeiCpuAndPchTraceHubLib.c
Intel/CannonLakeSiliconPkg/Library/Private/PeiCpuAndPchTraceHubLib/PeiCpuAndPchTraceHubLib.inf
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchInitPreMem.c
Intel/CannonLakeSiliconPkg/SiInit/Pei/SiInit.c

commit e699293cdd958e7ddc795821ffa68fca20fc5f0f
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 28 03:50:01 2017 -0700

    518243:[1604412757]CNL U6, U7 BIOS: Soundwire functionality is broken on CNL U6, U7 boards.
    [Description]
    Controller RESET# shall not be asserted if HDA/iDisp codec not detected in SNDW mode.
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchHda.c

commit 8f485b67a0bb3c100db5cd5e827aa1065b10e1cf
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 28 03:39:07 2017 -0700

    518240:[1604420478] : [SKL/KBL/CFL - Integrate latest CFL GOP 1069]
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/IntelGraphicsPeim/Binaries/IntelGraphicsPeimCfl.efi
Intel/CannonLakeSiliconPkg/SystemAgent/IntelGraphicsPeim/Binaries/IntelGraphicsPeimCflDebug.efi

commit a4dff3325a40483831172816483409b256c12796
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 27 23:56:52 2017 -0700

    518206:[1406343929][CNL][cAVS] BIOS W/A for disabling 1-bit ECC error write-back
    [Description]
    Set EM1/SEM1.ECCWRBKD[29] = 1b
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/Register/PchRegsHda.h
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchHda.c

commit 421a84eb61e6d62e3b51026ab5bab0456ff240f6
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 27 17:26:37 2017 -0700

    518143:1406339344.9: CNP-H A1 Integrate Chipsetinit Version 6
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/Private/CnlPchHHsioAx.h
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/CnlPchHHsioAx.c

commit 58030b7ab0045c3bf8b5f850891507796e4ac89f
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 27 11:58:50 2017 -0700

    518034:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 546879bf042d99c5678bbb5ed1f55ed52031121d
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 27 11:39:58 2017 -0700

    518033:[1406273797][[CFL-H-A1] System hangs when its enters into C10 with XDP disconnected.]
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/ConfigBlock/PmConfig.h
Intel/CannonLakeSiliconPkg/Pch/Include/Private/Library/GpioPrivateLib.h
Intel/CannonLakeSiliconPkg/Pch/Include/Register/PchRegsPmcCnl.h
Intel/CannonLakeSiliconPkg/Pch/Library/PeiPchPolicyLib/PchPrintPolicy.c
Intel/CannonLakeSiliconPkg/Pch/Library/PeiPchPolicyLib/PeiPchPolicyLib.c
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiDxeSmmGpioPrivateLib/GpioNativePrivateLibCnl.c
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchPm.c

commit 548f59fc711f4c1a550fba60355211e899d87d76
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 27 11:32:13 2017 -0700

    518031:[1406339467][CNP-LP B1 Integrate Chipsetinit Version 4]
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/Private/CnlPchLpHsioBx.h
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/CnlPchLpHsioBx.c

commit 50d61eca065c254f608383d49e410e273a6e7a9b
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 27 00:58:18 2017 -0700

    517888:[1604350850][CNL FSP version 80: GFX PEIM display not comming]
    
    [Description]
    PEI Disply is dependent on pcode readiness and pcode is dependent on RESET_CPL.
    So PEI Display initialisation shoule be done after RESET_CPL.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaInitLib/SaInit.c

commit 67d42742f8d26402735202112f1adf9c6359def5
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 26 13:49:48 2017 -0700

    517649:[220511085][CFL][MRC] Update BDAT Schema within MrcFillRmtBdatStructure
    
    Due to lack of compatibility for the EvLoader with FSP based BIOS, the decision was made for CFL to publish the MRC RMT results through BDAT Schema.
    
    The BDAT Schema is being updated to Schema 6 for future compatibility with any further functionality for MRC results being published through BDAT (Margin 1D, 2D and/or Bit/Byte level results)
    
    The BDAT Enable is disabled by default, and will need to be enabled through the BIOS Setup menu, or through hardcoded value within the BIOS. Also, the Rank Margin Tool Training step must be enabled to receive the RMT data in BDAT.
    
    Additional Change:
    Re-enable RMT by default within SaSetup, the default was incorrectly set to disabled by default in CL#366235
    
    ---
    

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInitCfl/Include/MrcRmtData.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInitCfl/Library/Private/PeiMemoryInitLib/PeiMemoryInitLib.inf
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInitCfl/Library/Private/PeiMemoryInitLib/PeiMemoryInitLibFsp.inf
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInitCfl/Library/Private/PeiMemoryInitLib/Source/Api/MrcBdat.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInitCfl/Library/Private/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInitCfl/MiniBios/MEMORY/MrcSetup.c

commit 0357be7132fa4b0d2b865716dc967bc0d1150e3a
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 26 12:09:53 2017 -0700

    517624:1304939270 : [CNL][MRC] LP4 Retraining - device mapping not programmed.
    Teamcity build fix for changelist - 517533.
    
    Changes:
    Programmed the MCMISCS_DeltaDQSDevUseMapChannel{0..3} register-  for each byte in each rank which Device each byte belongs to (0 or 1).
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcCommandTraining.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/WriteTraining/MrcWriteDqDqs.c

commit 2a1536a206df34f996b4e01f5138e14d8bbf26ae
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 26 11:46:24 2017 -0700

    517616:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 137da2bd8a6164b3d18f11c3a2254bb2b6e58b9f
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 26 09:38:22 2017 -0700

    517533:1304939270 : [CNL][MRC] LP4 Retraining - device mapping not programmed.
    
    Changes:
    Programmed the MCMISCS_DeltaDQSDevUseMapChannel{0..3} register-  for each byte in each rank which Device each byte belongs to (0 or 1).
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcCommandTraining.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/WriteTraining/MrcWriteDqDqs.c

commit 013e15702efd5409eb58922ad50eaaa00941f24b
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 26 06:54:13 2017 -0700

    517484:[1406315496][[CNP-H] DMI Offset Recal is enabled - not POR]
    
    Description:
    DMI ORCE setting should be left at HW default state (disabled).
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchRcLib/PchDmiRcLib.c

commit 093d49c5335d55492188e3bc358353a746bd5cce
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 26 06:22:34 2017 -0700

    517474:[1805308430][Issue in PCH PMC lib function - PmcDisableCf9ResetWithoutResumeWell()]
    
    Description:
    PmcDisableCf9ResetWithoutResumeWell() function had incorrect implementation - wrong bit was used
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiDxeSmmPmcPrivateLib/PmcPrivateLibCnl.c

commit b447ad71bc9943b3c1913fd17f317a9795c358d9
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 26 00:54:17 2017 -0700

    517417:[1504509777] Setup menu : Above 4GB MMIO BIOS assignment broken - take2
    
    ---
    

Intel/CannonLakeSiliconPkg/SiInit/Dxe/IncompatiblePciDeviceSupport.c

commit a7fdcd9e003d96ddd9a2521ab7c96db70377a6e9
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 22:31:12 2017 -0700

    517389:[HSD-ES] https://hsdes.intel.com/appstore/article/#/1604405064
    [Title] [CNL-U7][CNL-Y7][SECURITY]: BSOD observed while booting with SGX PRMRR values other than default value(32 MB)
    [Issue] Change the PRMRR value from 32 to 64, 128 or 256 and save. Reboot the system to OS and observe issue.
    [RootCause] Tolud/RemapBase/Limit registers are stored to original values when MrcFastBoot disabled.
    [Solution] 1. Remove save/restore Tolud/RemapBase/Limit registers. Those registers will be updated in every boot.
                    2. Revert back MrcFastBoot disabled w/a.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/Include/MrcInterface.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcSaveRestore.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h

commit 66671a5e2f6fd7f8f7dffab8398c851aacf50db1
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 20:09:03 2017 -0700

    517371:[1804999564][ICP-N] CNVi initialization and configuration additions
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/ConfigBlock/CnviConfig.h
Intel/CannonLakeSiliconPkg/Pch/Include/Private/Library/PeiCnviPrivateLib.h
Intel/CannonLakeSiliconPkg/Pch/Include/Register/PchRegsCnvi.h
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiCnviPrivateLib/PeiCnviPrivateLib.c
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiCnviPrivateLib/PeiCnviPrivateLibCnl.inf
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiCnviPrivateLib/PeiCnviPrivateLibHelper.h
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiCnviPrivateLib/PeiCnviPrivateLibHelperCnl.c
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiCnviPrivateLib/PeiCnviPrivateLibHelperIcl.c
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiCnviPrivateLib/PeiCnviPrivateLibIcl.inf
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiCnviPrivateLibNull/PeiCnviPrivateLibNull.c
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiCnviPrivateLibNull/PeiCnviPrivateLibNull.inf
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchInit.c
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchInitPei.h
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchInterruptAssign.c
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PeiPchInitLibCnl.inf
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PeiPchInitLibFspCnl.inf
Intel/CannonLakeSiliconPkg/SiPkgPeiLib.dsc

commit a019cd476eacac9ee5a279b0394fcc45b223557a
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 19:42:25 2017 -0700

    517364:[1604398952]Questions regarding FSP-M UPD values - some may need clarification, some may get modified
    
    [Description]
    1. Updated DmiGen3RootPortPreset = 8, DmiGen3RxCtlePeaking = 0;
    2. Removed CstateLatencyControl0Irtl as reserved, corrected CstateLatencyControl1Irtl from 0x6B to 0x76.
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/Library/PeiSaPolicyLib/PeiSaPolicyLib.c

commit 94095b6b49d9a8769c4d2983370cd657eccc7ab3
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 17:49:41 2017 -0700

    517352:[HSD-ES][client_platf][1305242265][cannon_lake]MRC Failure in Late command training on CNL U with DDR4 2R DIMMs at top frequency bins
    https://hsdes.intel.com/appstore/article/#/1305242265
    
    Issue:
    MRC fails LCT with new Micron Engineering samples on CNL U6
    PN: MTA16ATF2G64HZ-3G2EYES ( PC4-3200)
    Both channels and each channel separately on 1867.
    
    Root cause:
      Cache coherency issue between the the trained value of the PI's and the value from shifting the clock.  We eat into the tDQSS and Receive Enable margin.  At 1867 and high frequencies, we fail late command training due to not enough margin.
    
    Solution:
      Instead of relying on the register cache to store the trained value, we need to track this inside the MRC global data structure.  Added parameter for RcvEn, TxDq, and TxDqs.  ShiftDQPIs will use to store the trained value when UpdateHost == FALSE.  GetSet cache will reflect exactly what the register is programmed to.
    
    Other Changes:
      Removed an unused parameter on ShiftCh2Ch: SkipTx.
      Cleaned up ICL comments in MRC interfaces to BIOS as they are now separate platform packages.
      Default MiniBIOS to always read from SPD if DDR4 boards are detected.
      Removed IntControllerOut->TxVref[] as this was only used for LPDDR3 which is no longer POR.
      Removed LPDDR3 code from ShiftPIforCmdTraining()
      Remove Warm Reset Scrubbing message to CSME in DID as this is depracated for CFL.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/Include/ConfigBlock/MemoryConfig.h
Intel/CannonLakeSiliconPkg/SystemAgent/Include/ConfigBlock/SaMiscPeiPreMemConfig.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcCrosser.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcGlobal.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcCommon.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcCrosser.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/MiniBios/Common/PchRegsPcr.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/MiniBios/Common/PlatformBoardId.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInitCfl/Include/MrcInterface.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInitCfl/Library/Private/PeiMemoryInitLib/MemoryInit.c

commit 762ff8f664a4aebbb92a70edf9171505c1301be9
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 11:46:53 2017 -0700

    517221:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 9cd88cecc09d80f4faa9ef406eadf4df2bb544a6
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 09:45:47 2017 -0700

    517165:220400529: [MRC] Update Low Supply Enable configuration per MRC HAS 1.0
    
    HSD: https://hsdes.intel.com/appstore/article/#/220400529
    
    Description:
    
    Step-specific instructions:
    ?         CNL C0, CNL-H 6+2 and earlier dies; also true for ICL-A0!
    Due to a bug, CTL and CMD should not enable LowSupEn:
    DdrCrCtlControls1.CTLLowsupEn = 0,
    DdrCrCtlControls1.CKELowsupEn = 0
    DdrCrCompCtl2.CTLLowsupEn = 0
    DdrCrCtlControls1.CMDLowsupEn = 0
    DdrCrCmdControls1.CMDLowsupEn = 0
    DdrCrCompCtl2.CMDLowsupEn = 0
    ?         CNL D0 and 8+2 dies (and for ICL starting w/ B0):
    DdrCrCtlControls1.CKELowsupEn = 0 <- CKE must have keep the levels higher than Vccio
    DdrCrCtlControls1.CTLLowsupEn = 0  // Must follow CKE since they have common COMP
    DdrCrCompCtl2.CTLLowsupEn = 0  // Must follow CKE since they have common COMP
    DdrCrCtlControls1.CMDLowsupEn = 1
    DdrCrCmdControls1.CMDLowsupEn = 1
    DdrCrCompCtl2.CMDLowsupEn = 1
    
    Changes:
    
    Disable low supply enable for C0 and lower steppings in ULT_ULX and P0 and lower settings for Dt/Halo and disable mainly for CTL and CKE.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcGeneral.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcCrosser.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcMcConfiguration.c

commit 71fff153d5d50f9ba042b3433be8345097714df5
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 04:10:59 2017 -0700

    517105:[1604416291][Integrate Debug DXE and PEI GOP for CNL/CFL/ICL]
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/IntelGraphicsPeim/Binaries/IntelGraphicsPeimCflDebug.efi
Intel/CannonLakeSiliconPkg/SystemAgent/IntelGraphicsPeim/Binaries/IntelGraphicsPeimCnlDebug.efi

commit ff654c3d9310812817d091e05614eba264796962
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 04:05:30 2017 -0700

    517104:Back out changelist 517069 - it causes VisualStudio RC Pkg (EDKII) build fail ...
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXdci.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXhci.asl

commit f41aabe9e3bb8f4c7f57e592aa73ed9a7ab250c3
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 04:03:50 2017 -0700

    517103:Back out changelist 517089 - it causes VisualStudio RC Pkg (EDKII) build fail ...
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchSelfTestDsdt.asl

commit 251c83b7071603f3d10391bd768cdb4dc337f938
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 03:30:09 2017 -0700

    517098:

Intel/CannonLakeSiliconPkg/Docs/SiPkgApi.chm

commit f6de8f7f3c96b098d5da17c2fba230db29fb87f6
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 03:22:41 2017 -0700

    517096:Merge from 2017ClientMaster - [1805132325] xHCI initialization and configuration, [1805334367] BIOS doesn't clear bit8 in HOST_IF_PWR_CTRL_REG1 as requested by USB IP BIOS guide
    
    ---
    

Intel/CannonLakeSiliconPkg/Include/Register/RegsUsb.h
Intel/CannonLakeSiliconPkg/Library/Private/PeiDxeUsbInitLib/XhciInit.c

commit 9ed76b3ec7292705e2f59c8d0fdfdbd52c2018d2
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 02:44:42 2017 -0700

    517089:[HSD#1405716508]: TeamCity VisualStudio RC Pkg (EDKII) build fail.
    Description: TeamCity VisualStudio RC Pkg (EDKII) build fail.
    Code Review Link: "https://fm-codecollab.intel.com/ui#review:id=199642"
    ---
    

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchSelfTestDsdt.asl

commit 2379c427a7002d01ee4ce6ed188221bec1355811
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 01:40:36 2017 -0700

    517069:[HSD#1405716508]: [CFL/CNL U/Y] Requesting BIOS to set/clear MSPDRTREQ to enable MPHy SUS PG.
    Description:
    PMC Mem offset 10D0h (MODPHY_PM_CFG5), Bit 14: Corresponds to xHCI Controller
    Bit 15: Corresponds to xDCI Controller. However these BITs are not set.
    Solution:
    Code changes done in PchXhci.asl and PchXdci.asl to set/clear above bit at S0x entry and exit based on RTD3 setup option.
    
    Code Review: https://fm-codecollab.intel.com/ui#review:id=198811
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXdci.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXhci.asl

commit 281de19692a54db2044b3a991414e175d1775ea4
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 00:59:28 2017 -0700

    517056:

Intel/CannonLakeSiliconPkg/Docs/SiPkgApi.chm

commit 36352316961a581ae7f87cce41f35c9676575132
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 25 00:33:55 2017 -0700

    517039:[NO HSD] Update BIOS ID V97.1 and FSP/RC version 7.0.8.21
    
    ---
    

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 505908649bf0cf10d17c4d218285328de8d11030
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 24 20:07:15 2017 -0700

    516962:[NO HSD] Add Restricted tag to remove ICL information for CPU RC - Part2
    ---
    

Intel/CannonLakeSiliconPkg/Cpu/PowerManagement/Smm/PowerMgmtItbm.c

commit 8dd00f801f9f0b85525c6d75c76193b77a96e3dd
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 24 13:21:42 2017 -0700

    516821:[1604372780][[CFL-H-A1-PO] SUT does not enter SLP_S0 with CNP H QNDQ]
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/Register/PchRegsLpc.h
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchPm.c

commit 4aaede7dfdc5d07339d069fdd09fdb2b09b8d973
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 24 11:46:40 2017 -0700

    516783:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 599a21a97f67d5c7acf4f36fc618354b3e702cc5
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 24 08:02:07 2017 -0700

    516659:[1604406304][CNL]Enable CLKREQ and apply SI-WA to enable PEG10/60 - correct PEG display issue.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaPcieInitLib/PeiSaPcieInitLib.c

commit ca313fd236f2e6455c7d5dbc8a5238a7b4c0e1a0
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 24 00:23:13 2017 -0700

    516561:[1604398952]Questions regarding FSP-M UPD values - some may need clarification, some may get modified
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/Library/PeiSaPolicyLib/PeiSaPolicyLib.c

commit f9f8291b62db87798003b22d8bbf531d3a1f40cb
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 23 19:21:00 2017 -0700

    516502:[1504532988][cannon_lake][CNL] Klocwork issues for SA RC based on CNL Release_94_00_240 - Take3
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaPcieInitLib/LowLevel/PcieTrainingEqSettings.c

commit 234162a648c5e0068e7bafcf93f21a8e03ca29d3
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 23 15:20:33 2017 -0700

    516490:Back out changelist 516247 - It caused VisualStudio RC Pkg (EDKII) build error : [HSD#1405716508]: [CFL/CNL U/Y] Requesting BIOS to set/clear MSPDRTREQ to enable MPHy SUS PG.
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXdci.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXhci.asl

commit b563ae1c81531c1734bb3a0745d5b15d56044a01
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 23 12:33:32 2017 -0700

    516485:

Intel/CannonLakeSiliconPkg/Docs/SiPkgApi.chm

commit 242b17c5d45103bde8a57b2c95b91542d78df3ff
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 23 12:28:27 2017 -0700

    516484:

Intel/CannonLakeSiliconPkg/Cpu/AcpiTables/CpuSsdt/CpuNvs.asl
Intel/CannonLakeSiliconPkg/Cpu/Include/CpuNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Me/AcpiTables/MeSsdt/MeNvs.asl
Intel/CannonLakeSiliconPkg/Me/Include/Private/MeNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Me/Include/Private/PttNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Me/Ptt/Smm/PttNvs.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchNvs.asl
Intel/CannonLakeSiliconPkg/Pch/Include/Private/PchNvsAreaDef.h
Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SaSsdt/SaNvs.asl
Intel/CannonLakeSiliconPkg/SystemAgent/Include/Private/SaNvsAreaDef.h

commit 057a792261a8be39d7a9a3697a9a4671badbb788
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 23 12:02:13 2017 -0700

    516476:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 4b29bebe40be0c3c61068ccb9f4726074f31e18f
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 23 11:46:14 2017 -0700

    516474:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 4f8ecaf854c0da9539d85f2d963b379a3a0da542
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 23 10:08:52 2017 -0700

    516466:

Intel/CannonLakeSiliconPkg/Cpu/AcpiTables/CpuSsdt/CpuNvs.asl
Intel/CannonLakeSiliconPkg/Cpu/Include/ConfigBlock/CpuPowerMgmtBasicConfig.h
Intel/CannonLakeSiliconPkg/Cpu/Include/CpuNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Cpu/Include/CpuRegs.h
Intel/CannonLakeSiliconPkg/Me/AcpiTables/MeSsdt/MeNvs.asl
Intel/CannonLakeSiliconPkg/Me/Include/IshMsgs.h
Intel/CannonLakeSiliconPkg/Me/Include/Private/MeNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Me/Include/Private/PttNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Me/Ptt/Smm/PttNvs.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchNvs.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXdci.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXhci.asl
Intel/CannonLakeSiliconPkg/Pch/Include/Private/PchNvsAreaDef.h
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchHda.c
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchSata.c
Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SaSsdt/SaNvs.asl
Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SwitchableGraphics/Pch/SgRpCommon.asl
Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SwitchableGraphics/Pch/SgRpSsdt.asl
Intel/CannonLakeSiliconPkg/SystemAgent/Include/Private/SaNvsAreaDef.h
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaPcieDmiLib/PeiSaPcieDmiLib.c
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaPcieInitLib/LowLevel/SklPegPrivateLowLevel.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcGeneral.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcMemoryScrub.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcMcConfiguration.c

commit 14435c47cdf018a1294cb314ba8e1ac11f365565
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 23 03:39:22 2017 -0700

    516458:[NO HSD] Clean up 'ICL' comments and definitions in MRC
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/Include/MrcInterface.h

commit bc4cc6d4ea9c7364bf997a4e035c27f619bfedc7
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sat Jul 22 11:46:17 2017 -0700

    516425:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 31b21cfc2de3ee319d5d4e29bbaa8cb9eb4ad4b8
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 21 23:40:57 2017 -0700

    516416:[HSDES-1504367526]:CNL: ISH Multiple PDT Capsule update support in BIOS Platform Sample Code
    
    ---
    

Intel/CannonLakeSiliconPkg/Me/Include/IshMsgs.h
Intel/CannonLakeSiliconPkg/Me/Include/Library/DxeMeLib.h
Intel/CannonLakeSiliconPkg/Me/Library/DxeMeLib/HeciMsgDxeLib.c

commit 790d4f40aa8956c9b217aadcaf15b428ee05ecb4
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 21 12:29:39 2017 -0700

    516247:[HSD#1405716508]: [CFL/CNL U/Y] Requesting BIOS to set/clear MSPDRTREQ to enable MPHy SUS PG.
    Description:
    PMC Mem offset 10D0h (MODPHY_PM_CFG5), Bit 14: Corresponds to xHCI Controller
    Bit 15: Corresponds to xDCI Controller. However these BITs are not set.
    Solution:
    Code changes done in PchXhci.asl and PchXdci.asl to set/clear above bit at S0x entry and exit based on RTD3 setup option.
    
    Code Review: https://fm-codecollab.intel.com/ui#review:id=198811
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXdci.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXhci.asl

commit 05295e306f5d182025648f0e4cdc018c40e65263
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 21 11:46:14 2017 -0700

    516226:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 5ffb1f22a8bb6f2299a5193d9d61006301bb015a
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 21 10:59:16 2017 -0700

    516208:WOPCM programming need to be independent of PAVP feature
    
    https://hsdes.intel.com/appstore/article/#/220248542
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiGraphicsInitLib/PeiGraphicsPmInit.c

commit 04f72496b983a8b40403b4f81802afc2781dfb95
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 21 10:29:11 2017 -0700

    516184:[1406332384][[CFL-H-A1] SATA drives not detected with NVME drive in PCIe Slot 1 or Slot 2]
    [Issue]When nvme is populated in x1 slot, SATA functionality gets disabled.
    [Fix]BIOS was incorrectly trying to program invalid CR into SATA for pcie ports that didnt have nvmr supported. This caused SATA IP to get disabled. Fix is to avoid programming SATA registers for pcie ports that have invalid CR (based on FIA config)
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiDxeSmmRstPrivateLib/PeiDxeSmmRstPrivateLib.c
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchPcieStorageRemapping.c

commit 36c876882b1f4a240ce8c68c6ae34656144d0e99
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 20 22:25:25 2017 -0700

    516053:[1209831463]Add per-port CTLE override control to PEG policy values
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/Include/ConfigBlock/PciePeiPreMemConfig.h
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaPcieDmiLib/PeiSaPcieDmiLib.c

commit 8566d99e8d5f2fd5a79a6e6db328db49bb50afcd
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 20 18:53:41 2017 -0700

    516016:[NO HSD] Add Restricted tag to remove ICL information for CPU RC
    
    ---
    

Intel/CannonLakeSiliconPkg/Cpu/PowerManagement/Smm/PowerMgmtItbm.c

commit b1226c32e51b04c244da33bdf092efc40f99081d
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 20 11:46:08 2017 -0700

    515867:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 5259b26b3debffeb888354fe837123d6777e3d42
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 20 10:50:18 2017 -0700

    515854:[1405760249][CNL-Z0 Type-C] [AR-DP TCPC AIC card]TBT enumeration is failing with ASPM enabled
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/ConfigBlock/PcieRpConfig.h
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchRootPorts.c

commit 7020561792875b2306cea3c869fcba694b1e2179
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 20 00:43:53 2017 -0700

    515728:[MRC] Command Voltage Centering Fix, Memory Alias DIMM Capacity check Error Fix, MiniDVP 432 fix
    
    ---
    
    
    Cover the following:
    
    1 - Command Voltage Centering Fails with 1/2 channels populated on LPDDR4 and code clean
    https://hsdes.intel.com/appstore/article/#/220422992
    
    Changes:
    Calculate margin value also with non existing bytes by mistake ... Need to check if Byte is Exist.
    
    2 - Fix Memory Alias DIMM Capacity check Error
    SPD shows capacity for x16 channel, but our channel width is x32. Need Multiply DIMM Capacity by two in LPDDR4.
    
    3- Mini DVP fix for support 432b when channel 0 doesnot exist
    Need to support 432b also if channel 0 does not exist, Need to read SPD for channel 1 in this case

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcMemoryScrub.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcCommandTraining.c

commit dc28d1430db29c355fc54e37f1a936933520915e
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 19 23:09:40 2017 -0700

    515706:[1504538763] Create a Private Library for CpuTraceHub
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/Include/Private/Library/PeiCpuTraceHubLib.h
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiCpuTraceHubLib/PeiCpuTraceHubLib.c
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiCpuTraceHubLib/PeiCpuTraceHubLib.inf
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaInitLib/PeiSaInitLib.inf
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaInitLib/PeiSaInitLibFsp.inf
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaInitLib/SaInit.c

commit ce791eac306ab02b138e1cd9283cb1ffebb69cb4
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 19 17:04:11 2017 -0700

    515651:[NO_HSD] Extended copyright to 2017 as per RC review feedback.
    
    ---
    

Intel/CannonLakeSiliconPkg/SiPkgPei.dsc

commit 2f1537ef2f21c6090dae17efb1d7c7a66c83c44b
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 19 15:50:11 2017 -0700

    515594:[HSD-ES][client_platf][1209920162][kaby_lake.other][KBL-H][MRC][Non-Target ODT usage model is busted as there is no logic that forces all ranks to go into Self Refresh together]
    https://hsdes.intel.com/appstore/article/#/1209920162
    
    Issue:
     MRC uses Non-Target ODT when the non-target rank goes into self refresh.
     DDR4 spec says there is no termination when the rank is in self refresh.
    
    Solution:
     Change DDR4 ODT Matrix for 1DPC to assert ODT on the target rank.
     This prevents MC from putting the non-target rank into SR, breaking its termination.
     For 2DPC we already use ODT pin on the non-target DIMM.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcCommon.c

commit 78e22bd8e54618a5c5d7a650bcdcc511102f003e
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 19 11:47:00 2017 -0700

    515477:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 73567f70eab2bd78849ed7aab91a327946ad0427
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 19 07:13:17 2017 -0700

    515400:[1406311187] ICL BIOS CCB request: Bios to provide user options for configuring FIVR cfg registers
    
    [Feature description]
    BIOS should provide setup menu to make it possible to change FIVR configuration
    
    [Resolution]
    Setup menu was added to allow for FIVR configuration tweaking
    
    [Impacted Platform]  All
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/ConfigBlock/FivrConfig.h

commit 6d0c10b0089e34a64591432f1a918bbbfe3e6619
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 19 06:02:01 2017 -0700

    515393:[1504538291][cannon_lake][CNL] Remove unnecessary platform tags / codes in CannonLakePlatSamplePkg
    [Solution] Removed IceLakeFeature tags and unnecessary *Icl.inf.
    
    ---
    

Intel/CannonLakeSiliconPkg/SiInit/Pei/SiInitPreMem.inf
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiGraphicsInitLib/PeiGraphicsInitLib.inf

commit f34a1c1319d7492bc72e1e7752516b869bdd6e0c
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 19 03:37:31 2017 -0700

    515372:[NO HSD] Fixed ASCII issue due to CL515363
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SaSsdt/Ipu.asl

commit 2c007655165beec497834917eebb7fd8a899a325
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 19 03:36:51 2017 -0700

    515370:[1805280267] Provide BCFS (BIOS control feature support) to disable and enable CPU Attached Storage
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/ConfigBlock/SataConfig.h
Intel/CannonLakeSiliconPkg/Pch/Include/Register/PchRegsSata.h
Intel/CannonLakeSiliconPkg/Pch/Library/PeiPchPolicyLib/PchPrintPolicy.c
Intel/CannonLakeSiliconPkg/Pch/Library/PeiPchPolicyLib/PeiPchPolicyLib.c
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchSata.c

commit 1faa6dc3a35e39652dc047a1c5c15053eb718b16
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 19 02:56:52 2017 -0700

    515363:[1504540830][Cannonlake] Use _DSM method to pass LTR information from BIOS to IPU driver.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SaSsdt/Ipu.asl
Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SaSsdt/Sa.asl

commit 3b8748eb0b7a6c932cd9467e01d450b2bf82b90e
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 19 02:46:58 2017 -0700

    515362:

Intel/CannonLakeSiliconPkg/Docs/SiPkgApi.chm

commit d645745cbe5f99eb0e747488dce32456d6ef3005
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 19 02:13:21 2017 -0700

    515354:[NO HSD] Update FSP/RC to 7.0.7.31
    
    ---
    

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit a7071fee570333e0c729f0cfd53b0ed29f5fa02a
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 19 01:54:24 2017 -0700

    515345:Quick fix for 1604409732: Display is not observed after performing warm reset from OS on CNL U6/U7 boards
    Back out changelist 513966
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/Pch.asl

commit 019462d4254f446d2e134ba49cd2049bab3ca8d1
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 18 21:30:57 2017 -0700

    515269:1504532933 [CNL] Klocwork issues for PCH RC based on CNL Release_94_00_240
    [Description] Add condition check to prevent from overflow of array accessing.
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Library/PeiDxeSmmPchSerialIoLib/PchSerialIoLib.c

commit 0a3b80e5c2f7e1dd78b87905ad7523823236b0b7
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 18 12:39:51 2017 -0700

    515055:[HSD-ES][client_platf][1305239850][cannon_lake]Increase GB for RxBias training
    Based on SKL learning - need to increase guard band on power training selection of RxBias (IComp, RComp search) to ensure smooth behavior across temperature corners. Currently guard band is 1, need to increase to 3.
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcCrosser.c

commit 2e0be814b1ecea4b997e5a217f4da15eafec254f
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 18 11:46:19 2017 -0700

    515038:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 48acc5ffd6e7fc29b4cb724e9bb03bb766e03003
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 18 02:39:57 2017 -0700

    514919:[1504532944] [CNL] Klocwork issues for XHCI RC based on CNL Release_94_00_240
    
    [Issue Description]
    Klockwork scan exposed potential buffer overflow in USB library
    
    [Resolution]
    Limit the index value during array traversing
    
    [Impacted Platform]  ALL
    
    ---
    

Intel/CannonLakeSiliconPkg/Library/Private/PeiDxeUsbInitLib/XhciInit.c

commit 25ac94c49d1b7ab609a8f6fb6a9089531b33b131
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 18 02:18:57 2017 -0700

    514912:[1406259720] Low Power Mode Settings (LPM): SCS (EMMC)/PCR[EMMC]+600h GENREG_W1/[5] eMMC  OCP Clock Gating Enable to be set to 1
            eMMC OCP clock gating will be cleared only on CNL PCH.
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchScs.c

commit 1be848d648b27917d485b357f8c75eb5e90c9d64
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 18 00:59:03 2017 -0700

    514894:

Intel/CannonLakeSiliconPkg/Docs/SiPkgApi.chm

commit af49c6cd5acace7b649b9e1bafbaa57ccc687b1a
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 17 23:57:58 2017 -0700

    514884:[1604406298][CNL]Program new recipe to enable DMI x8
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchDmi15.c
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaPcieDmiLib/PeiSaPcieDmiLib.c

commit 5166ebd6c5fc6fdb4479cf7ad34cf71aa23b48f7
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 17 23:13:51 2017 -0700

    514862:[1604406304][CNL]Enable CLKREQ and apply SI-WA to enable PEG10/60
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/Include/Private/Library/SaPcieInitLib.h
Intel/CannonLakeSiliconPkg/SystemAgent/Include/Register/SaRegsPeg.h
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaPcieInitLib/LowLevel/SklPegPrivateLowLevel.c
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaPcieInitLib/PciExpressInit.c
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaPcieInitLib/PeiSaPcieInitLib.c
Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaPcieInitLib/PeiSaPcieInitLib.inf

commit e5b361c1da72a0d60479ae270fd991fe72ff5ad5
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 17 13:30:50 2017 -0700

    514628:[220486118] Fixed incorrect TXT ACM version # in SMBIOS.
    
    ---
    

Intel/CannonLakeSiliconPkg/Cpu/Include/Private/Library/TxtPeiLib.h
Intel/CannonLakeSiliconPkg/Cpu/Include/TxtInfoHob.h
Intel/CannonLakeSiliconPkg/Cpu/Library/Private/PeiTxtLib/TxtPeiLib.c
Intel/CannonLakeSiliconPkg/Include/SiFvi.h
Intel/CannonLakeSiliconPkg/Library/Private/PeiSiFviInitLib/PeiSiFvi.c
Intel/CannonLakeSiliconPkg/Library/Private/PeiSiFviInitLib/PeiSiFviInitLib.inf

commit 04249e71212c8819437462ec4ede7d6bd5315b80
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 17 11:46:22 2017 -0700

    514608:

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 4970c9c63f0cb0deb3b7c5f1626c4da475f111d0
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 17 09:22:19 2017 -0700

    514510:[1406297007][CNP-LP B1 Integrate Chipsetinit Version 3]
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/Private/CnlPchLpHsioBx.h
Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/CnlPchLpHsioBx.c

commit 7e0aa806b71866383199fdf25fe9255c66c5f891
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 16 23:22:31 2017 -0700

    514425:Back out changelist 514419. Accidental Check In.
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXdci.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXhci.asl

commit 907271e37b36c3ceb873142f2376b966246c9e5f
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 16 23:14:56 2017 -0700

    514419:[HSD#1405716508]: [CFL/CNL U/Y] Requesting BIOS to set/clear MSPDRTREQ to enable MPHy SUS PG.
    Description:
    PMC Mem offset 10D0h (MODPHY_PM_CFG5), Bit 14: Corresponds to xHCI Controller
    Bit 15: Corresponds to xDCI Controller. However these BITs are not set.
    Solution:
    Code changes done in PchXhci.asl and PchXdci.asl to set/clear above bit at S0x entry and exit based on RTD3 setup option.
    
    Code Review: https://fm-codecollab.intel.com/ui#review:id=198811
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXdci.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchXhci.asl

commit dc9dd1c66c79671953073e5fa5b722d44bf8eb86
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 16 20:53:10 2017 -0700

    514397:[1504535736] [CNL] Check and update Pch registers in BaseResetSystemLib
    [Description]
    Some renamed PCH registers in BaseResetSystemLib are not updated.
    Check all regs and update it.
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Library/BaseResetSystemLib/BaseResetSystemLib.c

commit 4ca39be4904d88c24ee3a65809d00f89cf9be29c
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 16 19:10:22 2017 -0700

    514372:[1504532988][cannon_lake][CNL] Klocwork issues for SA RC based on CNL Release_94_00_240 - Take2
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaPcieInitLib/LowLevel/PcieTrainingEqSettings.c

commit 39a2bf490e2bf2d1d7121066029c659f21f1134a
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 16 12:02:40 2017 -0700

    514349:

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchNvs.asl
Intel/CannonLakeSiliconPkg/Pch/Include/Private/PchNvsAreaDef.h
Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SaSsdt/SaNvs.asl
Intel/CannonLakeSiliconPkg/SystemAgent/Include/Private/SaNvsAreaDef.h

commit 9335aeaf1c949890bd283296ec393f5c46a27c44
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 16 12:02:11 2017 -0700

    514347:

Intel/CannonLakeSiliconPkg/Docs/SiPkgApi.chm

commit 750ef26984ebf3e185cbfd42f697eac1683e86ad
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 16 07:40:46 2017 -0700

    514336:[NO HSD] Update FSP/RC IDs to 7.0.7.10
    
    ---
    

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 192fd08918cd1c6a4577935d1d5accf28b606997
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 16 01:54:50 2017 -0700

    514326:[NO HSD] Set CFL_SIMICS to be Restricted
    
    ---
    

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec

commit 04e621bc526bd88071f41cac1b5e2ce969d70914
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Sun Jul 16 00:06:42 2017 -0700

    514324:[MRC] Enable back PPD for LPDDR4 and disable ReTraining for B step units
    
    ---
    
    
    Cover the following HSD's
    - Enable back PPD for LPDDR4
      https://hsdes.intel.com/appstore/article/#/1305201628
    
    Changes:
    - Enable back PPD for all LPDDR4 while disable ReTraining for Y4, (HW issue with CpuSteeping<=1)

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/MemoryInit.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcGeneral.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/McConfiguration/MrcPowerModes.c

commit d5f9a49b45b030fd1b0bb8a12a521c0f68565a31
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 14 17:34:58 2017 -0700

    514256:[MRC] Enable RxDqs P/N Training
    https://hsdes.intel.com/appstore/article/#/220419755
    
    Silicon bug was found where the inputs to P and N strobes are flipped.
    
    Re-enable the RxDqs P/N Training, and handle the strobe inversion in HAL.
    
    Other Changes:
      Revert the TxFifo Changes from previous checkin regarding MaxDec Calculation.
        Need more testing with LP4.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Hal/MrcHalRegisterAccess.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/ReadTraining/MrcReadDqDqs.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/WriteTraining/MrcWriteLeveling.c

commit 0112508da4590f22a3e7079ac227845407ab11e1
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 14 15:00:57 2017 -0700

    514181:[MRC] CNL - Rank ovr and Rank Val are not programmed for basic training steps
    https://hsdes.intel.com/appstore/article/#/220403960
    
    Issue:
      Rank override CR's are not programmed in basic training steps.
      Failing case observed:  fail in sense amp offset training when only ranks 2/3 are populated.
    
    Changes:
      SenseAmpOffsetTraining() will look for the first populated rank in the system.  It will use this rank for the RankOverrideVal when setitng RankOverrideEn.
      Added RankOverrideEn and RankOverrideVal into ReadMprTraining()
    
    Other bug fix:
      Fixed a bug in Write Leveling Flyby where the TxFifo pointer separation is not maintained.
      Disabled WriteDriveStrengthUpDn training due to a Divide by 0 exception.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcStartMemoryConfiguration.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/ReadTraining/MrcReadDqDqs.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcCrosser.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/WriteTraining/MrcWriteLeveling.c

commit c07a1e966f169c5b7c4f7ece93a64531d65c01e9
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 14 14:32:07 2017 -0700

    514168:[CNL][MRC] BIOS Hangs with MRC failure when Scrubber is executed on LPDDR4
    https://hsdes.intel.com/appstore/article/#/220451670
    
    Issue:
      MRC Scrubber detects test errors when executing on LPDDR4.  This returns Error to the call table and then returns error to PEI Core and hangs with assert.
    
    Root Cause:
      Because  we enable refresh FSM, MC initiates DqsOscillator which requires a MR read.  This leads to REUT thinking it has an error even though it only is sending Writes.
    
    Solution:
      Ignore CPGC error status for ECC scrubber.
    
    Fixes pulled in from ICL:
      Disable RTT_WR during JEDEC Write Leveling.
      Use Io[Write,Read]16 when setting MRC failure indication to the post code so it doesn't come up as 0xDD80.
      Remove some loops in ReadMprTraining and use GetSet multicast.
      Update to Stub and CTE to return a remaindor in U64DivU64.
      Fix the _HSH for DqOdtUpDnOff so it properly identifies as a signed field.
      SetDimmParamValue() is switched to use MrcWriteMRS() for DDR4 since it passes a Rank array instead of a DIMM array.
      ChannelEHash should only be set if all 4 channels are present.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/MemoryInit.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcMemoryScrub.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcRegisters/Cannonlake/MrcMcRegisterCnl1xxx.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/McConfiguration/MrcAddressDecodeConfiguration.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/MemoryTypes/MrcMemoryApi.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/ReadTraining/MrcReadDqDqs.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/WriteTraining/MrcWriteLeveling.c

commit 6a03d0585159c20d598d184eda2ad2778c322579
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 14 03:56:37 2017 -0700

    513975:[22060053] HECI Interrupt Delivery Mode (HIDM) Lock check test Failing
    ---
    

Intel/CannonLakeSiliconPkg/Me/Include/MeChipset.h
Intel/CannonLakeSiliconPkg/Me/Library/PeiDxeMeChipsetLib/PeiDxeMeChipsetLib.c

commit 84fd3e4d283c115eeba0ae7228315e0ad8e085ed
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 14 02:48:16 2017 -0700

    513966:1805290229 All PMC messages sent from ASL fail
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/Pch.asl

commit ddf5042daa50e68a46d89e84bea88bf210ef4d3e
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Fri Jul 14 00:56:32 2017 -0700

    513939:[1504532988][cannon_lake][CNL] Klocwork issues for SA RC based on CNL Release_94_00_240
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/Library/Private/PeiSaPcieInitLib/LowLevel/PcieTrainingEqSettings.c

commit 1e5835467ee2f45b45864858ce2a4e69d18ddc23
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 13 22:34:08 2017 -0700

    513911:1405911953 - CNL BIOS: Support for new ICC CSME FAS
    
    ---
    

Intel/CannonLakeSiliconPkg/Me/Library/DxeMeLib/HeciMsgDxeLib.c

commit bd7f0c4c2674fdb0100107b7ab78d50c61ed67bb
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 13 19:19:37 2017 -0700

    513871:[NO HSD] Update ME for RC 7.0.6.1  review.
    
    ---
    

Intel/CannonLakeSiliconPkg/Me/Library/DxeMeLib/HeciMsgDxeLib.c

commit 7529dcb69e9fd2b8cb76598732b9869701c34385
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 13 15:02:04 2017 -0700

    513760:Backout change list 513708.
    304939270 : [CNL][MRC] LP4 Retraining - device mapping not programmed. -  Partial check-in.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcCommandTraining.c

commit 85f74ad83882faee0f3800bbdf64b4958236f657
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 13 13:46:40 2017 -0700

    513727:[HSD-ES][client_platf][1305172520][CNL] SGX seal/unseal across S4 is failing
    [Issue/Feature Description]
    Running power tests using the FVT tool on Windows 10, we see that the seal/unseal S4 test is failing.
    [Resolution]
    -Update Non-production worthy BIOS Guard SE SVN to 0x0
    [Impacted Platform]
    All
    [Customer visible]
    No
    
    ---
    

Intel/CannonLakeSiliconPkg/Cpu/Include/BiosGuard.h

commit 4532064cb82af104c04c21f988e2420e1e61db88
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 13 12:45:52 2017 -0700

    513708:1304939270 : [CNL][MRC] LP4 Retraining - device mapping not programmed. -  Partial check-in.
    
    Changes:
    Programmed the MCMISCS_DeltaDQSDevUseMapChannel{0..3} register-  for each byte in each rank which Device each byte belongs to (0 or 1).
    
    Note: This check-in is related to 507807 . In this check-in writing zero into the DELTADQSDEVUSEMAP register.
    After issue is root caused we write the exact value
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcCommandTraining.c

commit 0931c79517b12ddf7b1513602cdd3bcd0bbeb58a
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Thu Jul 13 02:50:39 2017 -0700

    513582:[NO HSD] Update PCH for RC 7.0.6.1  review.
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/ConfigBlock/PmConfig.h

commit f7faaf6c2a18088ce9bcb40f022fff7c03e7b2ec
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 12 14:10:00 2017 -0700

    513364:[hsdes] 1406249945 [title] [CNL FSP]SkipMpInit function didn't cover all the steps
    [description] Add missing SkipMpInit check
    
    ---
    

Intel/CannonLakeSiliconPkg/Cpu/Library/Private/PeiCpuInitLib/Features.c

commit f7fa1bd27b73b8bcfcc51f788751a301f5863c44
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 12 03:52:02 2017 -0700

    513210:[NO HSD] Update format of ChangeList.h for Doxygen and add Restricted tag to remove ICL information for CPU RC
    
    ---
    

Intel/CannonLakeSiliconPkg/Cpu/PowerManagement/Smm/PowerMgmtItbm.c

commit eb019fff984a408252de9518f37bf0793b13753f
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 12 03:27:14 2017 -0700

    513202:[1305203200] - Remove SV restricted tags in CpuPowerMgmtBasicConfig.h
    
    ---
    

Intel/CannonLakeSiliconPkg/Cpu/Include/ConfigBlock/CpuPowerMgmtBasicConfig.h

commit bbce3df5592f8dc16d5732826593e95545f3b0e0
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 12 03:09:29 2017 -0700

    513198:[NoHSD] Update: CpuId for CFL S 4+2
    MRC Updates reverted back
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInitCfl/Library/Private/PeiMemoryInitLib/MemoryInit.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInitCfl/MiniBios/MEMORY/MrcOemPlatform.c

commit 5a7db71c9af95291e932782993e3de806f3b0ae4
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Wed Jul 12 02:00:25 2017 -0700

    513183:[LPSS][Access Above 4G] Merge CL 456896
    
    ---
    

Intel/CannonLakeSiliconPkg/Include/PcieRegs.h
Intel/CannonLakeSiliconPkg/Pch/Library/PeiDxeSmmPchSerialIoLib/PchSerialIoLib.c
Intel/CannonLakeSiliconPkg/Pch/PchInit/Dxe/PchAcpi.c

commit 778b3be0e514116040b8994ce8f339aed90c0ede
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 11 22:15:17 2017 -0700

    513119:[1604369744] : [[CNL] Refactor CannonLakeSiliconPkg\SystemAgent\SaInit\Dxe\SwitchableGraphicsInit.C]
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SwitchableGraphics/Pch/SgAcpiTablesPch.inf
Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SwitchableGraphics/Pch/SgDgpuPch.asl
Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SwitchableGraphics/Pch/SgRpCommon.asl
Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SwitchableGraphics/Pch/SgRpSsdt.asl
Intel/CannonLakeSiliconPkg/SystemAgent/AcpiTables/SwitchableGraphics/Pch/SgUlx.asl
Intel/CannonLakeSiliconPkg/SystemAgent/SaInit/Dxe/SaInitDxe.inf
Intel/CannonLakeSiliconPkg/SystemAgent/SaInit/Dxe/SwitchableGraphicsInit.c
Intel/CannonLakeSiliconPkg/SystemAgent/SaInit/Dxe/SwitchableGraphicsInit.h

commit 5b2a41496efeb1428ee76294c1f7b26eac99c815
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 11 14:50:17 2017 -0700

    513005:[1604358622] Updating comments based on code review feedback for [1604358622] [CFL-S [PM] BIOS configuration needed for PS_ON (https://hsdes.intel.com/appstore/article/#/1604358622)
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Include/ConfigBlock/PmConfig.h

commit 6a518b7c948083e371c135be0ab43fb6f89c0807
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 11 07:58:34 2017 -0700

    512871:[MRC] DdrMiscControl 1 & 2 are misprogrammed when only 1 channel is populated on DDR4
    
    ---
    
    
    Cover the following HSD:
    1305212385 : DdrMiscControl 1 & 2 are misprogrammed when only 1 channel is populated on DDR4
    https://hsdes.intel.com/appstore/article/#/1305212385
    
    Change:
    WriteMAX value to rx_analogen_grace_cnt also when channel 1 does not exist.

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Services/MrcMcConfiguration.c

commit d3fdd7838729ac1e4c22f3dd9e448745f30c4b0e
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 11 02:24:29 2017 -0700

    512839:[1805178257][CNL-U0,CNL-Y4][Audio]Display Audio Codec is not enumerating  in CNL U0 boards
    [Description]
    1. Removed redundant controller/link resets on codec initialization
    2. Skip iDisplay Audio Link frequency switching routine for 96MHz (HW default)
    3. Allow to enumerate iDisplay codec in for all Audio Link mode configurations
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/Library/Private/PeiPchInitLib/PchHda.c

commit 905c07937990f9309c13ade2405c6691651169a9
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Tue Jul 11 02:20:20 2017 -0700

    512835:[1805279365][CNL][SATA][NVMe][RTD3cold] D3cold is not supported on CNL platform
            - Removed unused options related to RTD3.
            - Added setup items to support more D3Cold configurations
            - Added power resource definitions for remapped devices
            - Removed power removal from _PS3() method on remapped devices
            - Restructured SATA Rtd3 code for easier integration on future platforms
            - Removed unused SATA DSM method (SDSM, not wrapped in any _DSM method)
    
    ---
    

Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchRstPcieStorage.asl
Intel/CannonLakeSiliconPkg/Pch/AcpiTables/Dsdt/PchSata.asl

commit 882b6f296685e6c3b96b686f815b874486d98833
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 10 14:05:31 2017 -0700

    512654:22096608 : [MRC] Depracate CmdTriStateDis from CNL onwards
    
    Description :
    Based on the IP changes, Command Tristate must be enabled always in functional mode.
    
    Remove all input control for CmdTriStateDis in CNL MRC.
    Keep the spot in MrcInterface.h marked as reserved to keep alignment with CFL.
    
    Changes:
    removed the Command tristate enable / disable option from CNL code and enabling the command tristate allways after training.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/Include/MrcInterface.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcGeneral.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/McConfiguration/MrcSchedulerParameters.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/WriteTraining/MrcWriteDqDqs.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/MiniBios/MEMORY/MrcSetup.c

commit b382ffdcb83296087ae589818f1d4f7dd5a49bb7
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 10 13:36:44 2017 -0700

    512648:1208856863 : [CNL][MRC] Update CAPID0_B.PLL_REF100_CFG code based on design description update
    
    Description :
    Currently MRC is limiting the ratio of the 100 PLL based on the old description.  This limits the frequency to 2600 MHz.
    
    MRC should check PLL_REF100_CFG to determine if we should allow 100MHz PLL,  Then it should use the MAX_F_ fuses to limit the ratio of PLL 100 as with PLL 133.
    If we are in Overclocking mode, our limit should be that of hardware 5866 MHz.
    
    PLL 100 is not POR, and an OC feature.  Thus the priority of this is low.
    
    Changes:
    PLL_REF100_CFG considered as bollean instead of Max frequency capable values. PLL 100 or PLL 133 ratio or frequencies considering from the MAX_F values.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcGeneral.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Include/MrcVersion.h

commit a6a3c27d3a4df4196e827462f326c11f4ad227cd
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 10 13:22:38 2017 -0700

    512646:Back out changelist 512602
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcGeneral.c

commit a6c9baf5843367827613dae97a81ec47bbfc1ecd
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 10 13:20:53 2017 -0700

    512645:Back out changelist 512631
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/Include/MrcInterface.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcGeneral.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/McConfiguration/MrcSchedulerParameters.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/WriteTraining/MrcWriteDqDqs.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/MiniBios/MEMORY/MrcSetup.c

commit f3a1f7829c44eb28730f05ec595b965e3c9781a4
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 10 12:49:58 2017 -0700

    512631:22096608 : [MRC] Depracate CmdTriStateDis from CNL onwards
    
    Description :
    Based on the IP changes, Command Tristate must be enabled always in functional mode.
    
    Remove all input control for CmdTriStateDis in CNL MRC.
    Keep the spot in MrcInterface.h marked as reserved to keep alignment with CFL.
    
    Changes:
    removed the Command tristate enable / disable option from CNL code and enabling the command tristate allways after training.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/Include/MrcInterface.h
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcGeneral.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/McConfiguration/MrcSchedulerParameters.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/WriteTraining/MrcWriteDqDqs.c
Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/MiniBios/MEMORY/MrcSetup.c

commit 1b637b6e8aa8b268286840e56a9172ffd1ea1ceb
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 10 11:31:19 2017 -0700

    512602:1208856863 : [CNL][MRC] Update CAPID0_B.PLL_REF100_CFG code based on design description update
    
    Description :
    Currently MRC is limiting the ratio of the 100 PLL based on the old description.  This limits the frequency to 2600 MHz.
    
    MRC should check PLL_REF100_CFG to determine if we should allow 100MHz PLL,  Then it should use the MAX_F_ fuses to limit the ratio of PLL 100 as with PLL 133.
    If we are in Overclocking mode, our limit should be that of hardware 5866 MHz.
    
    PLL 100 is not POR, and an OC feature.  Thus the priority of this is low.
    
    Changes:
    PLL_REF100_CFG considered as bollean instead of Max frequency capable values. PLL 100 or PLL 133 ratio or frequencies considering from the MAX_F values.
    
    ---
    

Intel/CannonLakeSiliconPkg/SystemAgent/MemoryInit/LibraryPrivate/PeiMemoryInitLib/Source/Api/MrcGeneral.c

commit 73b43336af2bd934cd7a55e5e7fd9f68e7197ab5
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 10 07:30:31 2017 -0700

    512535:

Intel/CannonLakeSiliconPkg/Docs/SiPkgApi.chm

commit c9d60f4613613d583d968c30da6cd18a66568855
Author: ClientSysFWGit <clientsysfwgit@intel.com>
Date:   Mon Jul 10 07:04:14 2017 -0700

    512526:[NO HSD] Update BIOS ID to V95.01 and FSP/RC IDs to 7.0.6.11
    
    ---
    

Intel/CannonLakeSiliconPkg/SiPkgCfl.dec
Intel/CannonLakeSiliconPkg/SiPkgCnl.dec
